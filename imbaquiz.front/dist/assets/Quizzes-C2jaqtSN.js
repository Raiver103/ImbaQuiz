import{u as b,r,j as e,L as E,g as k,a as p}from"./index-DvokuiYA.js";import w from"./Questions-3jhH9UwO.js";import"./Answers-B1_uX_Tl.js";const A=()=>{const{getAccessTokenSilently:n,user:o}=b(),[a,l]=r.useState([]),[d,x]=r.useState(null),[Q,j]=r.useState(""),[u,h]=r.useState(null),[c,z]=r.useState("");r.useEffect(()=>{(async()=>{if(o)try{const s=(await k(n)).filter(y=>y.userId===o.sub);l(s)}catch(i){console.error("Error fetching quizzes:",i)}})()},[n,o]);const f=async t=>{t.preventDefault();const i=await n();try{const s=await p.post("https://localhost:7280/api/quizzes",{title:Q,userId:o.sub},{headers:{Authorization:`Bearer ${i}`}});l([...a,s.data]),j("")}catch(s){console.error("Error adding quiz:",s)}},g=async()=>{if(!c)return;const t=await n();try{await p.put(`https://localhost:7280/api/quizzes/${u}`,{id:u,title:c,userId:o.sub},{headers:{Authorization:`Bearer ${t}`}}),l(a.map(i=>i.id===u?{...i,title:c}:i)),h(null),z("")}catch(i){console.error("Error updating quiz:",i)}},m=async t=>{const i=await n();try{await p.delete(`https://localhost:7280/api/quizzes/${t}`,{headers:{Authorization:`Bearer ${i}`}}),l(a.filter(s=>s.id!==t)),d===t&&x(null)}catch(s){console.error("Error deleting quiz:",s)}};return e.jsxs("div",{children:[e.jsx("h3",{children:"Your Quizzes"}),e.jsx("ul",{children:a.map(t=>e.jsx("li",{children:u===t.id?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:c,onChange:i=>z(i.target.value),placeholder:"Enter new quiz title",required:!0}),e.jsx("button",{onClick:g,children:"Save"}),e.jsx("button",{onClick:()=>h(null),children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[t.title,e.jsx("button",{onClick:()=>x(t.id),children:"View"}),e.jsx("button",{onClick:()=>{h(t.id),z(t.title)},children:"Edit"}),e.jsx("button",{onClick:()=>m(t.id),children:"Delete"}),e.jsx(E,{to:`/quiz-game/${t.id}`,children:e.jsx("button",{style:{marginLeft:"10px"},children:"Играть"})})]})},t.id))}),e.jsxs("form",{onSubmit:f,children:[e.jsx("input",{type:"text",value:Q,onChange:t=>j(t.target.value),placeholder:"Enter quiz title",required:!0}),e.jsx("button",{type:"submit",children:"Add Quiz"})]}),d&&e.jsx(w,{quizId:d})]})};export{A as default};
