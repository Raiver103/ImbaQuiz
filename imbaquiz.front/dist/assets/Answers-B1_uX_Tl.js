import{u as m,r as c,j as t,f as S,h as k,i as v,k as T}from"./index-DvokuiYA.js";const Q=({questionId:n})=>{const{getAccessTokenSilently:o}=m(),[a,i]=c.useState([]),[d,f]=c.useState(""),[u,C]=c.useState(!1),[l,h]=c.useState(null),[j,x]=c.useState(""),[w,A]=c.useState(!1);c.useEffect(()=>{(async()=>{if(n)try{const r=await S(n,o);i(r)}catch(r){console.error("Error fetching answers:",r)}})()},[n,o]);const y=async e=>{if(e.preventDefault(),!d||!n)return;const r={text:d,isCorrect:u};try{const s=await T(r,n,o);i([...a,s]),f(""),C(!1)}catch(s){console.error("Error adding answer:",s)}},g=async e=>{try{await v(e,o),i(a.filter(r=>r.id!==e))}catch(r){console.error("Error deleting answer:",r)}},b=e=>{h(e.id),x(e.text),A(e.isCorrect)},E=async e=>{if(e.preventDefault(),!l)return;const r={text:j,isCorrect:w};try{const s=await k(l,r,n,o);i(a.map(p=>p.id===l?{...p,text:s.text,isCorrect:s.isCorrect}:p)),h(null),x(""),A(!1)}catch(s){console.error("Error updating answer:",s)}};return t.jsxs("div",{children:[t.jsxs("h3",{children:["Answers for Question ",n]}),t.jsx("ul",{children:a.map(e=>t.jsx("li",{children:l===e.id?t.jsxs("form",{onSubmit:E,children:[t.jsx("input",{type:"text",value:j,onChange:r=>x(r.target.value),required:!0}),t.jsxs("label",{children:["Correct Answer",t.jsx("input",{type:"checkbox",checked:w,onChange:()=>A(!w)})]}),t.jsx("button",{type:"submit",children:"Save"}),t.jsx("button",{type:"button",onClick:()=>h(null),children:"Cancel"})]}):t.jsxs(t.Fragment,{children:[e.text," ",e.isCorrect?"(Correct)":"(Incorrect)",t.jsx("button",{onClick:()=>b(e),children:"Edit"}),t.jsx("button",{onClick:()=>g(e.id),children:"Delete"})]})},e.id))}),t.jsxs("form",{onSubmit:y,children:[t.jsx("input",{type:"text",value:d,onChange:e=>f(e.target.value),placeholder:"Enter new answer text",required:!0}),t.jsxs("label",{children:["Correct Answer",t.jsx("input",{type:"checkbox",checked:u,onChange:()=>C(!u)})]}),t.jsx("button",{type:"submit",children:"Add Answer"})]})]})};export{Q as default};
