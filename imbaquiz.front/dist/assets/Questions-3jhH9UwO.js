import{u as w,r as o,j as s,b as m,c as S,d as b,e as v}from"./index-DvokuiYA.js";import A from"./Answers-B1_uX_Tl.js";const T=({quizId:r})=>{const{getAccessTokenSilently:i}=w(),[c,a]=o.useState([]),[d,l]=o.useState(""),[x,f]=o.useState(null),[h,Q]=o.useState(null),[u,p]=o.useState("");o.useEffect(()=>{(async()=>{if(r)try{const t=await m(r,i);a(t)}catch(t){console.error("Error fetching questions:",t)}})()},[r,i]);const j=async e=>{if(e.preventDefault(),!d)return;const t={text:d};try{const n=await v(t,r,i);a([...c,n]),l("")}catch(n){console.error("Error adding question:",n)}},y=async e=>{try{await b(e,i),a(c.filter(t=>t.id!==e))}catch(t){console.error("Error deleting question:",t)}},E=e=>{Q(e.id),p(e.text)},g=async e=>{if(u)try{const t=await S(e,{text:u},r,i);a(c.map(n=>n.id===e?{...n,text:t.text}:n)),Q(null)}catch(t){console.error("Error updating question:",t)}};return s.jsxs("div",{children:[s.jsxs("h3",{children:["Questions for Quiz ",r]}),s.jsx("ul",{children:c.map(e=>s.jsxs("li",{children:[h===e.id?s.jsx("input",{type:"text",value:u,onChange:t=>p(t.target.value)}):e.text,s.jsx("button",{onClick:()=>f(e.id),children:x===e.id?"Hide Answers":"View Answers"}),h===e.id?s.jsx("button",{onClick:()=>g(e.id),children:"Save"}):s.jsx("button",{onClick:()=>E(e),children:"Edit"}),s.jsx("button",{onClick:()=>y(e.id),children:"Delete"}),x===e.id&&s.jsx(A,{questionId:e.id})]},e.id))}),s.jsxs("form",{onSubmit:j,children:[s.jsx("input",{type:"text",value:d,onChange:e=>l(e.target.value),placeholder:"Enter new question text",required:!0}),s.jsx("button",{type:"submit",children:"Add Question"})]})]})};export{T as default};
